<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VÃ¤lkommen</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="navbar.js"></script>
</head>
<body>

  <header>
    <div id="navbar"></div>
  </header>

  <main>
    <h2>VÃ¤lkommen till Kvalitets och utvecklingsenheten</h2>

    <p>
      VÃ¤lj musik nÃ¤r du kliver in ğŸ‘‡
    </p>

    <!-- KNAPPAR -->
    <div class="audio-controls">
      <button class="audio-btn" id="btnTiger" type="button">â–¶ Eye of the tiger</button>
      <button class="audio-btn" id="btnRocky" type="button">â–¶ Rocky gÃ¥</button>
      <button class="audio-btn audio-btn--stop" id="btnStopAll" type="button">â¹ Stoppa</button>
    </div>

    <!-- LJUD (dolda) -->
    <audio id="audioTiger" preload="auto">
      <source src="audio/eye-of-the-tiger.m4a" type="audio/mp4">
      Din webblÃ¤sare stÃ¶djer inte ljud.
    </audio>

    <audio id="audioRocky" preload="auto">
      <source src="audio/rocky.m4a" type="audio/mp4">
      Din webblÃ¤sare stÃ¶djer inte ljud.
    </audio>

    <p><em>"Teamwork"</em></p>

    <img src="img/team.png" alt="Team" style="max-width: 100%; height: auto; border-radius: 8px;" />
  </main>

  <footer>
    <p>Â© 2025 Johanna Johansson â€“ Ljusdals kommun</p>
  </footer>

  <script>
    const tiger = document.getElementById("audioTiger");
    const rocky = document.getElementById("audioRocky");

    const btnTiger = document.getElementById("btnTiger");
    const btnRocky = document.getElementById("btnRocky");
    const btnStopAll = document.getElementById("btnStopAll");

    function stopAll() {
      [tiger, rocky].forEach(a => {
        a.pause();
        a.currentTime = 0;
      });
      btnTiger.textContent = "â–¶ Eye of the tiger";
      btnRocky.textContent = "â–¶ Rocky gÃ¥";
    }

    async function togglePlay(audio, btn, otherAudio, otherBtn, label) {
      // stoppa andra lÃ¥ten alltid
      otherAudio.pause();
      otherAudio.currentTime = 0;
      otherBtn.textContent = `â–¶ ${otherBtn.dataset.label}`;

      // toggla denna
      if (!audio.paused) {
        audio.pause();
        btn.textContent = `â–¶ ${label}`;
        return;
      }

      try {
        await audio.play(); // mÃ¥ste triggas av klick (det gÃ¶r vi)
        btn.textContent = `â¸ Pausa ${label}`;
      } catch (err) {
        alert("Ljudet blockeras av webblÃ¤saren. Klicka en gÃ¥ng pÃ¥ sidan och testa igen.");
        console.error(err);
      }
    }

    btnTiger.dataset.label = "Eye of the tiger";
    btnRocky.dataset.label = "Rocky gÃ¥";

    btnTiger.addEventListener("click", () =>
      togglePlay(tiger, btnTiger, rocky, btnRocky, "Eye of the tiger")
    );

    btnRocky.addEventListener("click", () =>
      togglePlay(rocky, btnRocky, tiger, btnTiger, "Rocky gÃ¥")
    );

    btnStopAll.addEventListener("click", stopAll);
  </script>

</body>
</html>