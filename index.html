<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>VÃ¤lkommen</title>
    <link rel="stylesheet" href="style.css" />
    <script defer src="navbar.js"></script>
</head>
<body>

<header>
    <div id="navbar"></div>
</header>

<main>
    <h2>VÃ¤lkommen till Kvalitets och utvecklingsenheten</h2>

    <p>FÃ¶rst intro. Sedan full energi. ðŸ”¥</p>

    <!-- Dold spelare -->
    <audio id="player" preload="none"></audio>

    <div style="margin: 1.5rem 0; display:flex; gap:10px; flex-wrap:wrap;">

        <!-- INTRO + EYE -->
        <button id="comboBtn"
            style="background: var(--primary); color:#000; border:none; padding: 12px 16px; border-radius: 10px; font-weight: 700; cursor: pointer;">
            â–¶ Intro â†’ Eye of the Tiger
        </button>

        <!-- ROCKY -->
        <button id="rockyBtn"
            style="background:#2b2b2b; color:var(--text); border:1px solid rgba(255,255,255,0.2); padding: 12px 16px; border-radius: 10px; font-weight:700; cursor:pointer;">
            â–¶ Rocky
        </button>

        <!-- STOP -->
        <button id="stopBtn"
            style="background:#444; color:var(--text); border:none; padding: 12px 16px; border-radius: 10px; font-weight:700; cursor:pointer;">
            â–  Stoppa
        </button>

        <span id="status" style="align-self:center; color:rgba(241,241,241,0.8); margin-left:10px;">
            Pausat
        </span>
    </div>

    <p><em>"Teamwork"</em></p>

    <img src="img/team.png" alt="Team"
         style="max-width:100%; height:auto; border-radius:8px;" />
</main>

<footer>
    <p>Â© 2025 Johanna Johansson â€“ Ljusdals kommun</p>
</footer>

<script>
const player = document.getElementById("player");
const comboBtn = document.getElementById("comboBtn");
const rockyBtn = document.getElementById("rockyBtn");
const stopBtn = document.getElementById("stopBtn");
const statusEl = document.getElementById("status");

const comboTracks = [
    { src: "audio/Intro.m4a", label: "Intro" },
    { src: "audio/eye-of-the-tiger.m4a", label: "Eye of the Tiger" }
];

let currentIndex = 0;
let mode = null;

function setStatus(text) {
    statusEl.textContent = text;
}

function play(src, label) {
    player.src = src;
    player.load();
    player.play().then(() => {
        setStatus("Spelar: " + label);
    }).catch(err => {
        setStatus("Klicka igen om ljudet blockeras.");
        console.error(err);
    });
}

player.addEventListener("ended", () => {
    if (mode === "combo") {
        currentIndex++;
        if (currentIndex < comboTracks.length) {
            play(comboTracks[currentIndex].src, comboTracks[currentIndex].label);
        } else {
            mode = null;
            currentIndex = 0;
            setStatus("Klart âœ…");
        }
    } else {
        mode = null;
        setStatus("Klart âœ…");
    }
});

comboBtn.addEventListener("click", () => {
    player.pause();
    player.currentTime = 0;
    currentIndex = 0;
    mode = "combo";
    play(comboTracks[0].src, comboTracks[0].label);
});

rockyBtn.addEventListener("click", () => {
    player.pause();
    player.currentTime = 0;
    mode = "rocky";
    play("audio/Rocky.m4a", "Rocky");
});

stopBtn.addEventListener("click", () => {
    player.pause();
    player.currentTime = 0;
    currentIndex = 0;
    mode = null;
    setStatus("Stoppad");
});
</script>

</body>
</html>